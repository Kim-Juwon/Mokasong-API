<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mokasong.product.repository.AdminProductMapper">
    <insert id="createProduct" parameterType="com.mokasong.product.entity.Product" useGeneratedKeys="true" keyProperty="productId">
        INSERT INTO `mokasong`.`products`
        (`product_detail_category_id`, `name`, `price`, `discounted_price`, `stock`)
        VALUES (#{product.productDetailCategoryId}, #{product.name}, #{product.price}, #{product.discountedPrice}, #{product.stock})
    </insert>

    <insert id="createProductImages" parameterType="list">
        INSERT INTO `mokasong`.`product_images`
        (`product_id`, `url`)
        VALUES
        <foreach collection="productImages" item="item" separator=",">
            (
                #{item.productId},
                #{item.url}
            )
        </foreach>
    </insert>
</mapper>